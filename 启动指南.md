# 🚀 BeeSyncClip 启动指南

## 📋 快速启动（推荐方式）

### 步骤1: 获取项目
```bash
git clone https://github.com/DreamerVAC/BeeSyncClip.git
cd BeeSyncClip
```

### 步骤2: 安装依赖
```bash
pip install PyQt6 pyperclip requests
```

### 步骤3: 启动GUI客户端
```bash
chmod +x start_gui.sh
./start_gui.sh
```

### 步骤4: 登录使用
- **用户名**: `testuser`
- **密码**: `test123`
- **服务器**: 自动检测 (http://47.110.154.99:8000 或 http://47.110.154.99)

## 🖥️ GUI客户端启动方式

### 方法1: 使用启动脚本（推荐）
```bash
./start_gui.sh
```
- 自动检测服务器连接
- 自动检查依赖
- 智能选择可用端口

### 方法2: 直接启动
```bash
python desktop/main.py
```
- 直接启动PyQt6桌面客户端
- 需要手动配置服务器地址

### 方法3: Web客户端
```bash
python client/main.py
```
- 基于Web技术的客户端
- 支持浏览器访问

## 🔧 服务器脚本说明

### 🚀 服务器启动脚本

#### `start_daemon.sh` - 后台启动服务器
```bash
./start_daemon.sh
```
**功能**:
- 检查Redis连接状态
- 后台启动BeeSyncClip服务器
- 自动创建测试用户
- PID管理和日志记录
- 端口8000，支持外部访问

**适用场景**: 生产部署，长期运行

#### `start_server_port80.sh` - 80端口启动
```bash
sudo ./start_server_port80.sh
```
**功能**:
- 使用80端口启动服务器
- 绕过阿里云安全组限制
- 需要sudo权限
- 检查端口占用冲突

**适用场景**: 无法配置安全组时的临时方案

#### `start_server.sh` - 前台启动
```bash
./start_server.sh
```
**功能**:
- 前台启动服务器
- 实时显示日志
- 便于调试和开发

**适用场景**: 开发调试，临时测试

### 🔍 监控管理脚本

#### `status.sh` - 服务状态检查
```bash
./status.sh
```
**显示信息**:
- Redis运行状态和版本
- BeeSyncClip服务器状态
- 进程信息和PID
- 端口监听状态
- API健康检查
- 系统资源使用
- 最近日志内容

#### `stop_server.sh` - 停止服务器
```bash
./stop_server.sh
```
**功能**:
- 安全停止BeeSyncClip服务器
- 清理PID文件
- 确认进程已终止

### 🎯 客户端启动脚本

#### `start_gui.sh` - GUI客户端启动器
```bash
./start_gui.sh
```
**智能功能**:
- 自动检测服务器连接（8000端口和80端口）
- 自动安装缺失的Python依赖
- 提供连接故障的解决方案
- 设置环境变量供GUI使用

## 🌐 网络连接配置

### 选项A: 直接连接（需要配置安全组）
```bash
# 服务器端
./start_daemon.sh

# 客户端连接
./start_gui.sh  # 自动连接 http://47.110.154.99:8000
```

### 选项B: 80端口访问（立即可用）
```bash
# 服务器端
sudo ./start_server_port80.sh

# 客户端连接
./start_gui.sh  # 自动连接 http://47.110.154.99
```

### 选项C: SSH隧道连接
```bash
# 建立SSH隧道
ssh -L 8000:localhost:8000 ubuntu@47.110.154.99 -N

# 客户端连接
export BEESYNCCLIP_SERVER_URL="http://localhost:8000"
python desktop/main.py
```

## 🛠️ 开发调试

### 服务器端开发
```bash
# 启动Redis（如果未运行）
redis-server

# 前台启动服务器（显示日志）
python start_frontend_server.py

# 或使用脚本
./start_server.sh
```

### 客户端开发
```bash
# 安装完整依赖
pip install -r requirements.txt

# 启动GUI开发模式
python desktop/main.py

# 启动Web客户端
python client/main.py
```

### 调试工具
```bash
# 查看API文档
curl http://47.110.154.99:8000/docs

# 健康检查
curl http://47.110.154.99:8000/health

# 查看服务器日志
tail -f beesyncclip.log

# 实时监控状态
watch -n 5 ./status.sh
```

## 🔧 故障排除

### 问题1: 无法连接服务器
```bash
# 检查网络连通性
curl http://47.110.154.99:8000/health  # 8000端口
curl http://47.110.154.99/health        # 80端口

# 解决方案：
# 1. 配置阿里云安全组开放8000端口
# 2. 使用80端口: sudo ./start_server_port80.sh
# 3. 使用SSH隧道
```

### 问题2: GUI无法启动
```bash
# 安装GUI依赖
pip install PyQt6 pyperclip

# Linux额外依赖
sudo apt-get install python3-pyqt6 python3-pyqt6.qtwidgets

# macOS使用Homebrew
brew install pyqt6
```

### 问题3: 剪贴板不工作
```bash
# Linux安装剪贴板支持
sudo apt-get install xclip xsel

# 验证剪贴板功能
python -c "import pyperclip; print('Clipboard OK')"
```

### 问题4: 服务器启动失败
```bash
# 检查Redis状态
redis-cli ping

# 检查端口占用
netstat -tuln | grep :8000

# 查看详细错误
python start_frontend_server.py
```

## 📊 脚本使用流程

### 典型服务器部署流程
```bash
# 1. 启动服务器（生产环境）
./start_daemon.sh

# 2. 检查状态
./status.sh

# 3. 如果需要停止
./stop_server.sh

# 4. 重新启动
./start_daemon.sh
```

### 典型客户端使用流程
```bash
# 1. 克隆项目
git clone https://github.com/DreamerVAC/BeeSyncClip.git
cd BeeSyncClip

# 2. 安装依赖
pip install PyQt6 pyperclip requests

# 3. 启动GUI
./start_gui.sh

# 4. 登录使用（testuser/test123）
# 5. 享受跨设备剪贴板同步
```

## 🎯 脚本功能总览表

| 脚本名称 | 功能 | 权限要求 | 适用场景 |
|---------|------|----------|----------|
| `start_daemon.sh` | 后台启动服务器(8000端口) | 普通用户 | 生产部署 |
| `start_server_port80.sh` | 80端口启动服务器 | sudo | 绕过安全组 |
| `start_server.sh` | 前台启动服务器 | 普通用户 | 开发调试 |
| `start_gui.sh` | 启动GUI客户端 | 普通用户 | 客户端使用 |
| `status.sh` | 检查服务状态 | 普通用户 | 监控管理 |
| `stop_server.sh` | 停止服务器 | 普通用户 | 维护管理 |

---

🎉 **按照以上指南，您可以轻松启动和使用BeeSyncClip跨设备剪贴板同步功能！** 
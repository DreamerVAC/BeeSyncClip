# BeeSyncClip é˜¿é‡Œäº‘éƒ¨ç½²æŒ‡å— ğŸš€

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. é˜¿é‡Œäº‘ECSè´­ä¹°å’Œé…ç½®

#### ğŸ›’ è´­ä¹°ECSå®ä¾‹
1. ç™»å½• [é˜¿é‡Œäº‘æ§åˆ¶å°](https://ecs.console.aliyun.com)
2. ç‚¹å‡»ã€Œåˆ›å»ºå®ä¾‹ã€
3. é€‰æ‹©é…ç½®:
   ```
   åœ°åŸŸ: å°±è¿‘é€‰æ‹© (å¦‚åä¸œ1-æ­å·)
   å®ä¾‹è§„æ ¼: 2æ ¸4GBæˆ–ä»¥ä¸Š (æ¨è: ecs.t6-c1m2.large)
   é•œåƒ: CentOS 7.9 64ä½ æˆ– Ubuntu 20.04
   å­˜å‚¨: 40GB SSDäº‘ç›˜
   ç½‘ç»œ: ä¸“æœ‰ç½‘ç»œVPC + åˆ†é…å…¬ç½‘IP
   å¸¦å®½: 5Mbpsæˆ–ä»¥ä¸Š
   ```
4. è®¾ç½®rootå¯†ç 
5. å®Œæˆè´­ä¹°

#### ğŸ”’ é…ç½®å®‰å…¨ç»„
1. è¿›å…¥ECSæ§åˆ¶å° â†’ ç½‘ç»œä¸å®‰å…¨ â†’ å®‰å…¨ç»„
2. æ‰¾åˆ°æ‚¨çš„å®‰å…¨ç»„ï¼Œç‚¹å‡»ã€Œé…ç½®è§„åˆ™ã€
3. æ·»åŠ ä»¥ä¸‹å…¥æ–¹å‘è§„åˆ™:

| ç«¯å£èŒƒå›´ | æˆæƒå¯¹è±¡    | æè¿°           |
|----------|-------------|----------------|
| 22       | 0.0.0.0/0   | SSHè¿æ¥        |
| 8000     | 0.0.0.0/0   | HTTP API       |
| 8765     | 0.0.0.0/0   | WebSocket      |
| 6379     | å†…ç½‘IP      | Redis (å¯é€‰)   |

### 2. è·å–æœåŠ¡å™¨ä¿¡æ¯
```bash
# åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°è·å–ä»¥ä¸‹ä¿¡æ¯:
ECSå…¬ç½‘IP: xxx.xxx.xxx.xxx
ECSå†…ç½‘IP: 172.x.x.x
rootå¯†ç : [æ‚¨è®¾ç½®çš„å¯†ç ]
```

## ğŸ”— è¿æ¥åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨

### æ–¹æ³•1: ä½¿ç”¨æˆ‘ä»¬çš„è¿æ¥è„šæœ¬ (æ¨è)

#### æ­¥éª¤1: é…ç½®è¿æ¥ä¿¡æ¯
```bash
# ç¼–è¾‘è¿æ¥è„šæœ¬
vim deploy/connect_aliyun.sh

# ä¿®æ”¹ä»¥ä¸‹å˜é‡ (ç¬¬11è¡Œ)
ALIYUN_IP="æ‚¨çš„ECSå…¬ç½‘IP"    # å¦‚: 47.96.123.456
```

#### æ­¥éª¤2: è¿è¡Œè¿æ¥è„šæœ¬
```bash
cd BeeSyncClip
./deploy/connect_aliyun.sh
```

#### æ­¥éª¤3: é€‰æ‹©æ“ä½œ
```
è¯·é€‰æ‹©æ“ä½œ:
1) æµ‹è¯•è¿æ¥       # å…ˆæµ‹è¯•ç½‘ç»œè¿é€šæ€§
2) SSHè¿æ¥ (å¯†é’¥)  # å¦‚æœæ‚¨æœ‰SSHå¯†é’¥
3) SSHè¿æ¥ (å¯†ç )  # ä½¿ç”¨å¯†ç è¿æ¥
4) ä¸Šä¼ ä»£ç        # ä¸Šä¼ é¡¹ç›®ä»£ç åˆ°æœåŠ¡å™¨
5) ä¸€é”®éƒ¨ç½²       # è‡ªåŠ¨éƒ¨ç½²æ•´ä¸ªé¡¹ç›®
q) é€€å‡º
```

### æ–¹æ³•2: ç›´æ¥SSHè¿æ¥
```bash
# ä½¿ç”¨SSHè¿æ¥ (å°†IPæ›¿æ¢ä¸ºæ‚¨çš„å®é™…IP)
ssh root@æ‚¨çš„ECSå…¬ç½‘IP

# é¦–æ¬¡è¿æ¥ä¼šè¯¢é—®æ˜¯å¦ä¿¡ä»»ï¼Œè¾“å…¥ yes
# ç„¶åè¾“å…¥rootå¯†ç 
```

## ğŸš€ éƒ¨ç½²BeeSyncClip

### æ–¹å¼1: ä¸€é”®è‡ªåŠ¨éƒ¨ç½² (æ¨è)

#### ä½¿ç”¨æˆ‘ä»¬çš„éƒ¨ç½²è„šæœ¬:
```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
./deploy/connect_aliyun.sh

# é€‰æ‹© "5) ä¸€é”®éƒ¨ç½²"
# è„šæœ¬ä¼šè‡ªåŠ¨:
# - ä¸Šä¼ ä»£ç åˆ°æœåŠ¡å™¨
# - å®‰è£…æ‰€æœ‰ä¾èµ–
# - é…ç½®Redis
# - å¯åŠ¨æœåŠ¡
```

### æ–¹å¼2: æ‰‹åŠ¨éƒ¨ç½²

#### æ­¥éª¤1: ä¸Šä¼ ä»£ç 
```bash
# åœ¨æœ¬åœ°æ‰“åŒ…ä»£ç 
tar -czf BeeSyncClip.tar.gz \
    --exclude='.git' \
    --exclude='__pycache__' \
    --exclude='*.pyc' \
    BeeSyncClip/

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp BeeSyncClip.tar.gz root@æ‚¨çš„æœåŠ¡å™¨IP:/tmp/
```

#### æ­¥éª¤2: è¿æ¥æœåŠ¡å™¨
```bash
ssh root@æ‚¨çš„æœåŠ¡å™¨IP
```

#### æ­¥éª¤3: è§£å‹å¹¶éƒ¨ç½²
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /tmp
tar -xzf BeeSyncClip.tar.gz
cd BeeSyncClip

# è¿è¡Œéƒ¨ç½²è„šæœ¬
chmod +x deploy/aliyun_deploy.sh
./deploy/aliyun_deploy.sh
```

## ğŸ“Š éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥RedisçŠ¶æ€
systemctl status redis

# æ£€æŸ¥BeeSyncClipæœåŠ¡çŠ¶æ€
systemctl status beesyncclip

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
journalctl -u beesyncclip -f
```

### 2. æµ‹è¯•APIç«¯ç‚¹
```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£
curl http://æ‚¨çš„æœåŠ¡å™¨IP:8000/health

# é¢„æœŸè¿”å›:
{"status": "healthy", "timestamp": "2024-..."}
```

### 3. æµ‹è¯•WebSocketè¿æ¥
```bash
# å®‰è£…wscatå·¥å…· (å¦‚æœéœ€è¦)
npm install -g wscat

# æµ‹è¯•WebSocketè¿æ¥
wscat -c ws://æ‚¨çš„æœåŠ¡å™¨IP:8765
```

## ğŸ›  å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: SSHè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥:
1. ECSå…¬ç½‘IPæ˜¯å¦æ­£ç¡®
2. å®‰å…¨ç»„æ˜¯å¦å¼€æ”¾22ç«¯å£
3. ECSæ˜¯å¦æ­£åœ¨è¿è¡Œ
4. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

# è§£å†³æ–¹æ¡ˆ:
ping æ‚¨çš„æœåŠ¡å™¨IP
telnet æ‚¨çš„æœåŠ¡å™¨IP 22
```

### é—®é¢˜2: ç«¯å£æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥å®‰å…¨ç»„é…ç½®
1. é˜¿é‡Œäº‘æ§åˆ¶å° â†’ ECS â†’ å®‰å…¨ç»„
2. ç¡®è®¤8000å’Œ8765ç«¯å£å·²å¼€æ”¾
3. æ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™: systemctl status firewalld
```

### é—®é¢˜3: æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
journalctl -u beesyncclip -n 50

# å¸¸è§åŸå› :
1. Redisæœªå¯åŠ¨: systemctl start redis
2. ç«¯å£è¢«å ç”¨: netstat -tulpn | grep :8000
3. é…ç½®æ–‡ä»¶é”™è¯¯: cat /etc/beesyncclip/settings.yaml
```

### é—®é¢˜4: Redisè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥RedisçŠ¶æ€
systemctl status redis
redis-cli ping

# å¦‚æœRedisæœªå¯åŠ¨:
systemctl start redis
systemctl enable redis
```

## ğŸ“± å®¢æˆ·ç«¯è¿æ¥é…ç½®

### ä¿®æ”¹æœ¬åœ°å®¢æˆ·ç«¯é…ç½®
```bash
# ç¼–è¾‘å®¢æˆ·ç«¯é…ç½®
vim config/settings.yaml

# ä¿®æ”¹æœåŠ¡å™¨åœ°å€:
api:
  host: "æ‚¨çš„ECSå…¬ç½‘IP"  # æ”¹ä¸ºå®é™…IP
  port: 8000

websocket:
  host: "æ‚¨çš„ECSå…¬ç½‘IP"  # æ”¹ä¸ºå®é™…IP
  port: 8765
```

### æµ‹è¯•å®¢æˆ·ç«¯è¿æ¥
```bash
# å¯åŠ¨æœ¬åœ°å®¢æˆ·ç«¯
python desktop/main.py

# æ£€æŸ¥è¿æ¥æ—¥å¿—
# åº”è¯¥èƒ½çœ‹åˆ°è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨çš„æ—¥å¿—
```

## ğŸ”§ ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–

### 1. é…ç½®åŸŸå (å¯é€‰)
```bash
# å¦‚æœæ‚¨æœ‰åŸŸåï¼Œå¯ä»¥é…ç½®:
1. è§£æåŸŸååˆ°ECSå…¬ç½‘IP
2. ä¿®æ”¹é…ç½®æ–‡ä»¶ä½¿ç”¨åŸŸå
3. é…ç½®SSLè¯ä¹¦ (HTTPS/WSS)
```

### 2. æ€§èƒ½ä¼˜åŒ–
```bash
# Redisä¼˜åŒ–
vim /etc/redis.conf
# è°ƒæ•´maxmemory, maxclientsç­‰å‚æ•°

# ç³»ç»Ÿä¼˜åŒ–
echo 'net.core.somaxconn = 65535' >> /etc/sysctl.conf
sysctl -p
```

### 3. ç›‘æ§å’Œå¤‡ä»½
```bash
# è®¾ç½®å®šæ—¶å¤‡ä»½
crontab -e
# æ·»åŠ : 0 2 * * * /opt/beesyncclip/scripts/backup.sh

# ç›‘æ§æ—¥å¿—
tail -f /var/log/beesyncclip/app.log
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
- æŸ¥çœ‹æœåŠ¡æ—¥å¿—: `journalctl -u beesyncclip -f`
- æ£€æŸ¥é…ç½®æ–‡ä»¶: `cat /etc/beesyncclip/settings.yaml`
- æµ‹è¯•ç½‘ç»œè¿æ¥: `curl http://localhost:8000/health`

### é‡å¯æœåŠ¡
```bash
# é‡å¯BeeSyncClipæœåŠ¡
systemctl restart beesyncclip

# é‡å¯Redis
systemctl restart redis

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status beesyncclip redis
```

---

**ğŸ‰ éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å°±æ‹¥æœ‰äº†ä¸€ä¸ªäº‘ç«¯çš„å‰ªè´´æ¿åŒæ­¥æœåŠ¡ï¼**

ä¸‹ä¸€æ­¥: [é…ç½®å®¢æˆ·ç«¯è¿æ¥](../README.md#é…ç½®è¯´æ˜) å’Œ [æµ‹è¯•å¤šè®¾å¤‡åŒæ­¥](../ROADMAP.md#æµ‹è¯•è®¡åˆ’) 